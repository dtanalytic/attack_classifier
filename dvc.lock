schema: '2.0'
stages:
  text_preprocess:
    cmd: python src/prep.py params.yaml
    deps:
    - path: src/prep.py
      hash: md5
      md5: c4b9b58ec18926a971564a6806bad51c
      size: 1414
    params:
      params.yaml:
        prep_text.labelled_text_only: true
        prep_text.lower: true
        prep_text.max_len_token: 10
        prep_text.min_len_token: 3
        prep_text.save_only_words: false
        prep_text.stem_lemm: stem
        prep_text.stop_words: true
    outs:
    - path: data/mlb.pkl
      hash: md5
      md5: 08a80aca9b7512e7605918bfeee704fa
      size: 1764
    - path: data/prep_df.csv
      hash: md5
      md5: 4e3d36ab8e5593f2d3e0fa2d380b879a
      size: 330864
  feature_generation:
    cmd: python src/feat_gen.py params.yaml
    deps:
    - path: data/mlb.pkl
      hash: md5
      md5: 08a80aca9b7512e7605918bfeee704fa
      size: 1764
    - path: data/prep_df.csv
      hash: md5
      md5: 4e3d36ab8e5593f2d3e0fa2d380b879a
      size: 330864
    - path: src/feat_gen.py
      hash: md5
      md5: 1f9e14cb3a6cf31e3a798597c3ef70bb
      size: 2352
    params:
      params.yaml:
        feat_gen.binary: true
        feat_gen.feat_strategy: count
        feat_gen.max_features:
        seed: 0
    outs:
    - path: data/data_df.csv
      hash: md5
      md5: fb1f3b502aea3ae846c0777f19df91d8
      size: 344526
    - path: data/feat_df.pkl
      hash: md5
      md5: 4cc22b8e15c96e90606238c99e9e7d2b
      size: 14627549
    - path: data/vec.pkl
      hash: md5
      md5: a9fec9784b7ca64d006734b29f499b99
      size: 26403
  feature_engineering:
    cmd: python src/feat_eng.py params.yaml
    deps:
    - path: data/data_df.csv
      hash: md5
      md5: fb1f3b502aea3ae846c0777f19df91d8
      size: 344526
    - path: data/feat_df.pkl
      hash: md5
      md5: 4cc22b8e15c96e90606238c99e9e7d2b
      size: 14627549
    - path: data/vec.pkl
      hash: md5
      md5: a9fec9784b7ca64d006734b29f499b99
      size: 26403
    - path: src/feat_eng.py
      hash: md5
      md5: cb5ad3e2ba32d02abf7506459c21a957
      size: 2246
    params:
      params.yaml:
        feat_eng.add_clust_feat: true
        feat_eng.add_topic_feat: 20
        feat_eng.tfidf_dim: 20
        feat_eng.topic_algo: lsa
        seed: 0
    outs:
    - path: data/feat_final_df.pkl
      hash: md5
      md5: fc3a2e3a611a2f8ea9c073f8e1d0fdb8
      size: 301075
  train_eval_model:
    cmd: python src/train_eval_model.py params.yaml
    deps:
    - path: data/feat_final_df.pkl
      hash: md5
      md5: fc3a2e3a611a2f8ea9c073f8e1d0fdb8
      size: 301075
    - path: src/train_eval_model.py
      hash: md5
      md5: 163168582e2475e28eea83d6070e38e1
      size: 3073
    params:
      params.yaml:
        seed: 0
        train_eval_model.chain: false
        train_eval_model.model: boost
    outs:
    - path: data/m.json
      hash: md5
      md5: 30f098f0b2b2e64c570c270d209a7709
      size: 126
    - path: data/model.pkl
      hash: md5
      md5: 3a80d3d4bdb512d6fb9c02fc780a7142
      size: 17804225
