schema: '2.0'
stages:
  text_preprocess:
    cmd: python src/prep.py params.yaml
    deps:
    - path: src/prep.py
      hash: md5
      md5: 5d1fd4f859455b6eb2ed103a6c5a7d5c
      size: 1500
    params:
      params.yaml:
        prep_text.labelled_text_only: true
        prep_text.lower: false
        prep_text.max_len_token: 10
        prep_text.min_len_token: 3
        prep_text.save_only_words: false
        prep_text.stem_lemm: stem
        prep_text.stop_words: false
    outs:
    - path: data/mlb.pkl
      hash: md5
      md5: 08a80aca9b7512e7605918bfeee704fa
      size: 1764
    - path: data/prep_df.csv
      hash: md5
      md5: a78d112da14c908fa24682302c321981
      size: 354155
  feature_generation:
    cmd: python src/feat_gen.py params.yaml
    deps:
    - path: data/mlb.pkl
      hash: md5
      md5: 08a80aca9b7512e7605918bfeee704fa
      size: 1764
    - path: data/prep_df.csv
      hash: md5
      md5: a78d112da14c908fa24682302c321981
      size: 354155
    - path: src/feat_gen.py
      hash: md5
      md5: c1f49a8fe160e2322cbc6c150e8b156e
      size: 2414
    params:
      params.yaml:
        feat_gen.binary: false
        feat_gen.feat_strategy: tfidf
        feat_gen.max_features:
        seed: 0
    outs:
    - path: data/data_df.csv
      hash: md5
      md5: 4433c0f72f12e3a06f34e7430a78a0d4
      size: 366846
    - path: data/feat_df.pkl
      hash: md5
      md5: b06488b4b339b428185c0d5c4682d4b9
      size: 15073911
    - path: data/vec.pkl
      hash: md5
      md5: 1e5f8388d9acc9df583495562da2d8c5
      size: 45533
  feature_engineering:
    cmd: python src/feat_eng.py params.yaml
    deps:
    - path: data/data_df.csv
      hash: md5
      md5: 4433c0f72f12e3a06f34e7430a78a0d4
      size: 366846
    - path: data/feat_df.pkl
      hash: md5
      md5: b06488b4b339b428185c0d5c4682d4b9
      size: 15073911
    - path: data/vec.pkl
      hash: md5
      md5: 1e5f8388d9acc9df583495562da2d8c5
      size: 45533
    - path: src/feat_eng.py
      hash: md5
      md5: 13ddb8d8273a4b4b30210b79e0fa0df8
      size: 2993
    params:
      params.yaml:
        feat_eng.add_clust_feat: false
        feat_eng.add_ind_cols: false
        feat_eng.add_topic_feat: true
        feat_eng.tfidf_dim: 8
        feat_eng.topic_algo: lsa
        seed: 0
    outs:
    - path: data/feat_final_df.pkl
      hash: md5
      md5: f867e8c38160277255be55da02f33876
      size: 60962
  train_eval_model:
    cmd: python src/train_eval_model.py params.yaml
    deps:
    - path: data/feat_final_df.pkl
      hash: md5
      md5: f867e8c38160277255be55da02f33876
      size: 60962
    - path: src/train_eval_model.py
      hash: md5
      md5: 73327f048095adfcbd68f3108345b7ad
      size: 3927
    params:
      params.yaml:
        seed: 0
        train_eval_model.balanced:
        train_eval_model.chain: true
        train_eval_model.model: logreg
    outs:
    - path: data/m.json
      hash: md5
      md5: e0887aea84b895dec84fb3c63a4c5b9b
      size: 138
    - path: data/model.pkl
      hash: md5
      md5: 6b2735a61f514a460c911fbd83c66ca7
      size: 34751
    - path: data/old_m.json
      hash: md5
      md5: 95c4cc8b4aa33a6f724c021574a29ca4
      size: 140
