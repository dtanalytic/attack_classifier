schema: '2.0'
stages:
  make_bert_ttp:
    cmd: python src/ttp/train_bert_emb.py dvc_pipes/bert_ttp/params_bert_ttp.yaml
    deps:
    - path: data/interim/ttp/data_df.csv
      hash: md5
      md5: d50768a3a0a14aa2ef6b4e2b9dd26e15
      size: 58063291
    - path: data/interim/ttp/mlb.pkl
      hash: md5
      md5: 400dd1536fb247aeb574d6292afaf744
      size: 3478
    - path: src/spec_nn_funcs.py
      hash: md5
      md5: 3529abdb84e9ffa82b20a73588421952
      size: 15345
    - path: src/ttp/train_bert_emb.py
      hash: md5
      md5: 170e81c545add3460717cb4e5b6b6793
      size: 1006
    params:
      params.yaml:
        seed: 0
      dvc_pipes/bert_ttp/params_bert_ttp.yaml:
        nn_bert_ttp.bert_type: secbert_plus
        nn_bert_ttp.drop_ratio: 0.3
        nn_bert_ttp.from_existing: false
        nn_bert_ttp.mode: cls
        nn_ttp.batch_size: 8
        nn_ttp.epoch_num: 8
        nn_ttp.exp_gamma: 0.95
        nn_ttp.l2: 4.5e-06
        nn_ttp.learning_rate: 0.002
        nn_ttp.maxlen: 128
        nn_ttp.milestone_gamma: 0.5
        nn_ttp.milestone_l:
        - 7
    outs:
    - path: data/out/bert_ttp/bert_by_class_metric.csv
      hash: md5
      md5: 1facf4b6131e278c028d24c2f78c7ee4
      size: 4797
    - path: data/out/bert_ttp/bert_conf_df.csv
      hash: md5
      md5: b9deab831f192699ff94c632c8badbce
      size: 143010
    - path: data/out/bert_ttp/bert_confusion_matrix.png
      hash: md5
      md5: d4c8fefb0488610aac36ffea96429263
      size: 1082778
    - path: data/out/bert_ttp/bert_confusion_matrix_main_er.png
      hash: md5
      md5: dfd1433ff7feddc9efa3674e487b0001
      size: 77864
    - path: data/out/bert_ttp/bert_logloss.png
      hash: md5
      md5: 6d6caedd0fb5419ef3a70e521a39a29d
      size: 24445
    - path: data/out/bert_ttp/bert_m.json
      hash: md5
      md5: 60d6f2bdbf1f3601bf13aca935cd2885
      size: 75
    - path: data/out/bert_ttp/bert_m_all.json
      hash: md5
      md5: d0762a1a144ceff8972a1222eed36fe0
      size: 2178
    - path: data/out/bert_ttp/bert_m_other.json
      hash: md5
      md5: e51bad707f40737cc3e83de87de55fe6
      size: 414
    - path: data/out/bert_ttp/bert_opt_metric.csv
      hash: md5
      md5: fd5933344ead18ba20bd51537a8057ce
      size: 4731498
    - path: data/out/bert_ttp/bert_pr_auc.png
      hash: md5
      md5: fc6a10e88abd77782f2805b607e38cde
      size: 20459
    - path: data/out/bert_ttp/model.pt
      hash: md5
      md5: 309f3d7693fcf6eb0d4161cf65f4f2a5
      size: 501682934
