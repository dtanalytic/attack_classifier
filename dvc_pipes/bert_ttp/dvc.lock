schema: '2.0'
stages:
  make_bert_ttp:
    cmd: python src/ttp/train_bert_emb.py dvc_pipes/bert_ttp/params_bert_ttp.yaml
    deps:
    - path: data/interim/ttp/data_df.csv
      hash: md5
      md5: 80f8253074c916e632121add3893ea07
      size: 43981944
    - path: data/interim/ttp/mlb.pkl
      hash: md5
      md5: df37de6e8b389dcc9282030d7c1edc38
      size: 2230
    - path: src/spec_nn_funcs.py
      hash: md5
      md5: cf5fef5d603c74808f34981adf264022
      size: 15610
    - path: src/ttp/train_bert_emb.py
      hash: md5
      md5: 170e81c545add3460717cb4e5b6b6793
      size: 1006
    params:
      params.yaml:
        seed: 0
      dvc_pipes/bert_ttp/params_bert_ttp.yaml:
        nn_bert_ttp.bert_type: secbert_plus
        nn_bert_ttp.drop_ratio: 0.3
        nn_bert_ttp.from_existing: false
        nn_bert_ttp.mode: cls
        nn_bert_ttp.thresh_split: val
        nn_ttp.batch_size: 8
        nn_ttp.epoch_num: 8
        nn_ttp.exp_gamma: 0.95
        nn_ttp.l2: 4.5e-06
        nn_ttp.learning_rate: 0.002
        nn_ttp.maxlen: 128
        nn_ttp.milestone_gamma: 0.5
        nn_ttp.milestone_l:
        - 7
    outs:
    - path: data/out/bert_ttp/bert_by_class_metric.csv
      hash: md5
      md5: d544bf013ee54ec019f9b5b2fd9a2113
      size: 3032
    - path: data/out/bert_ttp/bert_conf_df.csv
      hash: md5
      md5: a22a08b31744637540c9aa8e723abcfb
      size: 130964
    - path: data/out/bert_ttp/bert_confusion_matrix.png
      hash: md5
      md5: a106aba3d5bedac028160417c09e7a34
      size: 554724
    - path: data/out/bert_ttp/bert_confusion_matrix_main_er.png
      hash: md5
      md5: 399507902e1a0c1d8af09240b97d7c26
      size: 87649
    - path: data/out/bert_ttp/bert_logloss.png
      hash: md5
      md5: fd7357d14bc5a0057ab5fb24839d74ca
      size: 25610
    - path: data/out/bert_ttp/bert_m.json
      hash: md5
      md5: ab793a145f26706e6d27a682cd4961f0
      size: 74
    - path: data/out/bert_ttp/bert_m_all.json
      hash: md5
      md5: 34b908e3342b38435d42ec0e254c4819
      size: 2168
    - path: data/out/bert_ttp/bert_m_other.json
      hash: md5
      md5: 3ebe11c952ddfe1d0cfdefb814c26685
      size: 416
    - path: data/out/bert_ttp/bert_opt_metric.csv
      hash: md5
      md5: a6f4e08d9468d46e71f15e7aabf696e0
      size: 3587257
    - path: data/out/bert_ttp/bert_pr_auc.png
      hash: md5
      md5: c0607d59158f8b521f726a415a9f3551
      size: 20910
    - path: data/out/bert_ttp/model.pt
      hash: md5
      md5: 5a577ff3bbbc440d037ebff0f1dea5fd
      size: 501486070
