schema: '2.0'
stages:
  make_bert_ttp:
    cmd: python src/ttp/train_bert_emb.py dvc_pipes/bert_ttp/params_bert_ttp.yaml
    deps:
    - path: data/interim/ttp/data_df.csv
      hash: md5
      md5: 4dde751cd5140353133e9641b1488cc3
      size: 58182245
    - path: data/interim/ttp/mlb.pkl
      hash: md5
      md5: 05d07416a5427bd64a0a618f5b0e78b5
      size: 3484
    - path: src/spec_nn_funcs.py
      hash: md5
      md5: f6051cef705fb5305351e2f4a82012b0
      size: 15349
    - path: src/ttp/train_bert_emb.py
      hash: md5
      md5: 77622c7943a0a8444deac37420d59819
      size: 973
    params:
      params.yaml:
        seed: 0
      dvc_pipes/bert_ttp/params_bert_ttp.yaml:
        nn_bert_ttp.bert_type: secbert_plus
        nn_bert_ttp.drop_ratio: 0.3
        nn_bert_ttp.from_existing: false
        nn_bert_ttp.mode: cls
        nn_ttp.batch_size: 8
        nn_ttp.epoch_num: 8
        nn_ttp.exp_gamma: 0.95
        nn_ttp.l2: 4.5e-06
        nn_ttp.learning_rate: 0.002
        nn_ttp.maxlen: 128
        nn_ttp.milestone_gamma: 0.5
        nn_ttp.milestone_l:
        - 7
    outs:
    - path: data/out/bert_ttp/bert_by_class_metric.csv
      hash: md5
      md5: f6e25372637bd8a7c88c3ca2de0c1231
      size: 4932
    - path: data/out/bert_ttp/bert_conf_df.csv
      hash: md5
      md5: d1dff4a83b25fb9000546903d1294e75
      size: 151114
    - path: data/out/bert_ttp/bert_confusion_matrix.png
      hash: md5
      md5: f28a3f0d0fcde6daa414e54f2556b22c
      size: 1076002
    - path: data/out/bert_ttp/bert_confusion_matrix_main_er.png
      hash: md5
      md5: ec2b00808ffbd4dfcfd7b44193bbed76
      size: 91405
    - path: data/out/bert_ttp/bert_logloss.png
      hash: md5
      md5: fa0462fd84dd0fa2c5b343c266f965a1
      size: 24779
    - path: data/out/bert_ttp/bert_m.json
      hash: md5
      md5: faefc2eacb5b51c192c2e29babb3361d
      size: 73
    - path: data/out/bert_ttp/bert_m_all.json
      hash: md5
      md5: 82d25ac39dfdbb43faf68f4b82a8db1d
      size: 2164
    - path: data/out/bert_ttp/bert_m_other.json
      hash: md5
      md5: ac9bf2d4507dc33344a9be2d16b08ab4
      size: 416
    - path: data/out/bert_ttp/bert_opt_metric.csv
      hash: md5
      md5: ff0f3fb50c1d8b3bb974b8893afefd9b
      size: 2051874
    - path: data/out/bert_ttp/bert_pr_auc.png
      hash: md5
      md5: 44bc6008f6cb42beb7daa83ad0306110
      size: 20931
    - path: data/out/bert_ttp/model.pt
      hash: md5
      md5: 9c9e59c437713f148b694ac7583eab6e
      size: 501685046
