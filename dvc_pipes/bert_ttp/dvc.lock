schema: '2.0'
stages:
  make_bert_ttp:
    cmd: python src/ttp/train_bert_emb.py dvc_pipes/bert_ttp/params_bert_ttp.yaml
    deps:
    - path: data/interim/ttp/data_df.csv
      hash: md5
      md5: 4dde751cd5140353133e9641b1488cc3
      size: 58182245
    - path: data/interim/ttp/mlb.pkl
      hash: md5
      md5: 05d07416a5427bd64a0a618f5b0e78b5
      size: 3484
    - path: src/spec_nn_funcs.py
      hash: md5
      md5: 84fd168dae5cc2b9af8fbc957447580e
      size: 15965
    - path: src/ttp/train_bert_emb.py
      hash: md5
      md5: 170e81c545add3460717cb4e5b6b6793
      size: 1006
    params:
      params.yaml:
        seed: 0
      dvc_pipes/bert_ttp/params_bert_ttp.yaml:
        nn_bert_ttp.bert_type: secbert_plus
        nn_bert_ttp.drop_ratio: 0.3
        nn_bert_ttp.from_existing: false
        nn_bert_ttp.mode: cls
        nn_bert_ttp.thresh_split: tr
        nn_ttp.batch_size: 8
        nn_ttp.epoch_num: 8
        nn_ttp.exp_gamma: 0.95
        nn_ttp.l2: 4.5e-06
        nn_ttp.learning_rate: 0.002
        nn_ttp.maxlen: 128
        nn_ttp.milestone_gamma: 0.5
        nn_ttp.milestone_l:
        - 7
    outs:
    - path: data/out/bert_ttp/bert_by_class_metric.csv
      hash: md5
      md5: f9ed76ae9d94433faf8336fa6b0a1f00
      size: 4546
    - path: data/out/bert_ttp/bert_conf_df.csv
      hash: md5
      md5: 97a976901951e88f3677b4bb478636ee
      size: 142205
    - path: data/out/bert_ttp/bert_confusion_matrix.png
      hash: md5
      md5: 95fc427d968b5f0567afdbc6de5e3600
      size: 1078300
    - path: data/out/bert_ttp/bert_confusion_matrix_main_er.png
      hash: md5
      md5: 4d36c2a4dc2ff18a78ec388416a92b36
      size: 91603
    - path: data/out/bert_ttp/bert_logloss.png
      hash: md5
      md5: fa0462fd84dd0fa2c5b343c266f965a1
      size: 24779
    - path: data/out/bert_ttp/bert_m.json
      hash: md5
      md5: faefc2eacb5b51c192c2e29babb3361d
      size: 73
    - path: data/out/bert_ttp/bert_m_all.json
      hash: md5
      md5: 82d25ac39dfdbb43faf68f4b82a8db1d
      size: 2164
    - path: data/out/bert_ttp/bert_m_other.json
      hash: md5
      md5: 1c7f7c0071014435d5111aad0d189995
      size: 417
    - path: data/out/bert_ttp/bert_opt_metric.csv
      hash: md5
      md5: c03f5291dfb1e80b15ca25120e9eeba8
      size: 6653696
    - path: data/out/bert_ttp/bert_pr_auc.png
      hash: md5
      md5: 44bc6008f6cb42beb7daa83ad0306110
      size: 20931
    - path: data/out/bert_ttp/model.pt
      hash: md5
      md5: 94d7d37a8e9c056751b665dcbe430445
      size: 501685046
