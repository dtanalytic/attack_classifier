schema: '2.0'
stages:
  feature_generation_ttp:
    cmd: python src/ttp/feat_gen.py dvc_pipes/ttp/params_ttp.yaml
    deps:
    - path: data/interim/prep_df.csv
      hash: md5
      md5: 87aa8972311c45b2004fb9de97c38540
      size: 28849286
    - path: data/interim/ttp/mlb.pkl
      hash: md5
      md5: 05d07416a5427bd64a0a618f5b0e78b5
      size: 3484
    - path: src/spec_funcs.py
      hash: md5
      md5: 4b9ec698eeca8b8565d87645f1588fd5
      size: 18239
    - path: src/ttp/feat_gen.py
      hash: md5
      md5: 98a6affc55f1e420327e0117c4b7e30a
      size: 1275
    params:
      params.yaml:
        seed: 0
      dvc_pipes/ttp/params_ttp.yaml:
        feat_gen_ttp.add_individual_thresh: 0.3
        feat_gen_ttp.binary: false
        feat_gen_ttp.feat_strategy: count
        feat_gen_ttp.ind_sel_estim_num: 10
        feat_gen_ttp.ind_sel_tree_max_depth: 3
        feat_gen_ttp.logreg_c: 0.05
        feat_gen_ttp.max_df: 0.1
        feat_gen_ttp.max_features:
        feat_gen_ttp.min_df: 10
        feat_gen_ttp.tree_maxdepth: 3
    outs:
    - path: data/interim/ttp/data_df.csv
      hash: md5
      md5: 33a86b18ad7a41fbe180830b519bead8
      size: 47790285
    - path: data/interim/ttp/feat_df.csv
      hash: md5
      md5: b15b80be4d70fe72f9cfd69c824e8a48
      size: 40866525
    - path: data/interim/ttp/vec.pkl
      hash: md5
      md5: 27a963a22b312d307f1f45ccc30bff79
      size: 121464
  feature_engineering_ttp:
    cmd: python src/ttp/feat_eng.py dvc_pipes/ttp/params_ttp.yaml
    deps:
    - path: data/interim/ttp/data_df.csv
      hash: md5
      md5: 33a86b18ad7a41fbe180830b519bead8
      size: 47790285
    - path: data/interim/ttp/feat_df.csv
      hash: md5
      md5: b15b80be4d70fe72f9cfd69c824e8a48
      size: 40866525
    - path: data/interim/ttp/vec.pkl
      hash: md5
      md5: 27a963a22b312d307f1f45ccc30bff79
      size: 121464
    - path: src/spec_funcs.py
      hash: md5
      md5: 4b9ec698eeca8b8565d87645f1588fd5
      size: 18239
    - path: src/ttp/feat_eng.py
      hash: md5
      md5: 653a8318270b4a251d0c062472d28383
      size: 667
    params:
      dvc_pipes/ttp/params_ttp.yaml:
        feat_eng_ttp.add_clust_feat: false
        feat_eng_ttp.add_ind_cols: true
        feat_eng_ttp.add_topic_feat:
        feat_eng_ttp.tfidf_dim:
        feat_eng_ttp.topic_algo: lsa
    outs:
    - path: data/out/ttp/feat_final_df.csv
      hash: md5
      md5: b60e53c334c7da2a270a643342fe55b4
      size: 40989515
  train_eval_model_ttp:
    cmd: python src/ttp/train_eval_model.py dvc_pipes/ttp/params_ttp.yaml
    deps:
    - path: data/out/ttp/feat_final_df.csv
      hash: md5
      md5: 7ad3f3787a5e39cacea2e498a605552d
      size: 41051017
    - path: src/spec_funcs.py
      hash: md5
      md5: 4b9ec698eeca8b8565d87645f1588fd5
      size: 18239
    - path: src/ttp/train_eval_model.py
      hash: md5
      md5: 8379ae64ef0078ccd90622ed5dab5f7c
      size: 1107
    params:
      params.yaml:
        seed: 0
      dvc_pipes/ttp/params_ttp.yaml:
        train_eval_model_ttp.attack_clf: inc
        train_eval_model_ttp.balanced:
        train_eval_model_ttp.chain: true
        train_eval_model_ttp.model: logreg
        train_eval_model_ttp.opt_metric: f1
    outs:
    - path: data/out/ttp/by_class_metric.csv
      hash: md5
      md5: bfaaae3674ae0143312d5cdba253f254
      size: 4910
    - path: data/out/ttp/conf_df.csv
      hash: md5
      md5: 9a1e71255419149d034a2d44b1176364
      size: 161842
    - path: data/out/ttp/confusion_matrix.png
      hash: md5
      md5: 59d636f75a1474ade00babf4d4f4f10d
      size: 1086715
    - path: data/out/ttp/confusion_matrix_main_er.png
      hash: md5
      md5: bf231b77ac1153abfb7dd412accdd862
      size: 123203
    - path: data/out/ttp/m.json
      hash: md5
      md5: 25282546213747a301d59813fd8fb8f6
      size: 141
    - path: data/out/ttp/m_other.json
      hash: md5
      md5: cf1c36422c5d0b016e75255424e945d2
      size: 563
    - path: data/out/ttp/model.pkl
      hash: md5
      md5: 178385f4cca2f7e893bb14276c1cee54
      size: 1337039
    - path: data/out/ttp/opt_metric.csv
      hash: md5
      md5: 6afaf13aa1165ecba8bce17b1d796f12
      size: 1556071
