schema: '2.0'
stages:
  make_bert_emb:
    cmd: python src/train_bert_emb.py dvc_pipes/bert/params_bert.yaml
    deps:
    - path: data/interim/data_df.csv
      hash: md5
      md5: dca1fe43cab59355d0d3ad9c2b1dcae5
      size: 11113294
    - path: data/interim/mlb.pkl
      hash: md5
      md5: 395e67e77481135535fc59d27bfd53f0
      size: 1380
    - path: src/spec_nn_funcs.py
      hash: md5
      md5: 3529abdb84e9ffa82b20a73588421952
      size: 15345
    - path: src/train_bert_emb.py
      hash: md5
      md5: 777e0703188453138128246acc5d2ce5
      size: 611
    params:
      params.yaml:
        seed: 0
      dvc_pipes/bert/params_bert.yaml:
        nn.batch_size: 8
        nn.epoch_num: 9
        nn.exp_gamma: 0.95
        nn.l2: 4.5e-05
        nn.learning_rate: 0.005
        nn.maxlen: 128
        nn.milestone_gamma: 0.5
        nn.milestone_l:
        - 4
        - 8
        nn_bert.bert_type: secbert_plus
        nn_bert.drop_ratio: 0.7
        nn_bert.from_existing: false
        nn_bert.mode: cls
    outs:
    - path: data/out/bert/bert_by_class_metric.csv
      hash: md5
      md5: 44d7ad241083e9929f88d25106cfb1bb
      size: 482
    - path: data/out/bert/bert_conf_df.csv
      hash: md5
      md5: 099834845230d6c1b72776a6bce1ddb9
      size: 220237
    - path: data/out/bert/bert_confusion_matrix.png
      hash: md5
      md5: 1b19a46a298c7e389e10cde3df5ac83d
      size: 116663
    - path: data/out/bert/bert_confusion_matrix_main_er.png
      hash: md5
      md5: 2b476845cad4b35f2794579245dd1e3d
      size: 85331
    - path: data/out/bert/bert_logloss.png
      hash: md5
      md5: 9abb62980fb3dd7a4b21ea9483ece11f
      size: 25491
    - path: data/out/bert/bert_m.json
      hash: md5
      md5: 350d847ead817905c43c3e3b1c5065bc
      size: 75
    - path: data/out/bert/bert_m_all.json
      hash: md5
      md5: 657e92c59c03af38c621697e61b64737
      size: 2406
    - path: data/out/bert/bert_m_other.json
      hash: md5
      md5: 55cc4bb3c0d9e5f7f3aa53353d2ddab5
      size: 417
    - path: data/out/bert/bert_opt_metric.csv
      hash: md5
      md5: d79cc07c4eb54f83c301d9bcde995a80
      size: 20890
    - path: data/out/bert/bert_pr_auc.png
      hash: md5
      md5: 602d47b0f8d40608dc5ad18a76260ca1
      size: 24156
    - path: data/out/bert/model.pt
      hash: md5
      md5: 2143da31ecca2b5d91e4e2e274000aa3
      size: 501101558
