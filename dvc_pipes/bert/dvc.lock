schema: '2.0'
stages:
  make_bert_emb:
    cmd: python src/train_bert_emb.py dvc_pipes/bert/params_bert.yaml
    deps:
    - path: data/interim/data_df.csv
      hash: md5
      md5: e4360e3d57624c4690ef454a20a4d86b
      size: 11143993
    - path: data/interim/mlb.pkl
      hash: md5
      md5: 59aa9a82e455e7fed9a95b929105bcb9
      size: 1386
    - path: src/spec_nn_funcs.py
      hash: md5
      md5: f6051cef705fb5305351e2f4a82012b0
      size: 15349
    - path: src/train_bert_emb.py
      hash: md5
      md5: 777e0703188453138128246acc5d2ce5
      size: 611
    params:
      params.yaml:
        seed: 0
      dvc_pipes/bert/params_bert.yaml:
        nn.batch_size: 8
        nn.epoch_num: 9
        nn.exp_gamma: 0.95
        nn.l2: 4.5e-05
        nn.learning_rate: 0.005
        nn.maxlen: 128
        nn.milestone_gamma: 0.5
        nn.milestone_l:
        - 4
        - 8
        nn_bert.bert_type: secbert_plus
        nn_bert.drop_ratio: 0.7
        nn_bert.from_existing: false
        nn_bert.mode: cls
    outs:
    - path: data/out/bert/bert_by_class_metric.csv
      hash: md5
      md5: 12ebb0ef17a6632fd691655ad0e150f2
      size: 482
    - path: data/out/bert/bert_conf_df.csv
      hash: md5
      md5: 777adf2d6591ca620b7933d45deeb84e
      size: 233183
    - path: data/out/bert/bert_confusion_matrix.png
      hash: md5
      md5: 2b6b1b95ed01b2cc7bc73c501864124c
      size: 117101
    - path: data/out/bert/bert_confusion_matrix_main_er.png
      hash: md5
      md5: 77ff5148556d62ae9a8d617c56b0224c
      size: 93044
    - path: data/out/bert/bert_logloss.png
      hash: md5
      md5: fa140c2ed679930ff05dc8a95689ad29
      size: 24054
    - path: data/out/bert/bert_m.json
      hash: md5
      md5: 61e890ef10b7e6e16d05833227015337
      size: 72
    - path: data/out/bert/bert_m_all.json
      hash: md5
      md5: 3c75d6f5dd18270e92ee357e3a51f7e8
      size: 2398
    - path: data/out/bert/bert_m_other.json
      hash: md5
      md5: 3f668e4b9ba7b03d4453655641e148a6
      size: 417
    - path: data/out/bert/bert_opt_metric.csv
      hash: md5
      md5: 44afbb1d54d7b847176e38e6ce283cb8
      size: 21353
    - path: data/out/bert/bert_pr_auc.png
      hash: md5
      md5: 3e484dfd996728ce70447122b9dabec6
      size: 24000
    - path: data/out/bert/model.pt
      hash: md5
      md5: b2daa71c8433af2bc68d25ef176d1d74
      size: 501103670
